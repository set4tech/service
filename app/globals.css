@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --hairline: 0.5px;
}

/* "paper" noise texture for report viewer */
.bg-paper {
  background-color: #f5f2e8;
  background-image:
    radial-gradient(closest-side, rgba(0,0,0,0.015), rgba(0,0,0,0) 90%),
    linear-gradient(rgba(0,0,0,0.02) 1px, transparent 1px);
  background-size: 240px 240px, 100% 100%;
  background-position: -40px -40px, 0 0;
}

/* Motion defaults with reduced-motion support */
* {
  transition: color .12s cubic-bezier(0.2,0,0,1),
              background-color .12s cubic-bezier(0.2,0,0,1),
              border-color .12s cubic-bezier(0.2,0,0,1);
}

@media (prefers-reduced-motion: reduce) {
  * {
    transition: none !important;
    animation: none !important;
  }
}

@layer components {
  /* Spacing convention: default to 4/8/16px rhythm */
  .stack-sm > * + * { @apply mt-1.5; }   /* 6px - tighter */
  .stack-md > * + * { @apply mt-3; }     /* 12px */
  .stack-lg > * + * { @apply mt-6; }     /* 24px */

  /* Cards - use borders for containment, shadows only for floating */
  .card       { @apply bg-white rounded-lg border border-line p-3 md:p-4; }
  .card-muted { @apply rounded-lg bg-gray-50 p-3; }
  .card-elevated { @apply bg-white rounded-lg shadow-card p-3 md:p-4; }

  /* Buttons - compact density */
  .btn { @apply inline-flex items-center justify-center rounded-md px-3 py-1.5 text-sm font-medium transition gap-1.5;
         @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sage-600 focus-visible:ring-offset-2; }
  .btn-primary   { @apply btn bg-sage-700 text-white hover:bg-sage-800 disabled:opacity-50; }
  .btn-secondary { @apply btn border border-line bg-white hover:bg-sage-50; }
  .btn-danger    { @apply btn text-danger-600 hover:text-danger-500 hover:bg-red-50; }
  .btn-ghost     { @apply btn text-ink-700 hover:bg-sage-100; }
  .btn-icon      { @apply inline-flex items-center justify-center rounded-md border border-line;
                   @apply p-1.5 text-sm hover:bg-sage-50;
                   @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sage-600 focus-visible:ring-offset-2;
                   @apply min-w-[36px] min-h-[36px]; }

  /* Inputs - compact */
  .input    { @apply block w-full rounded-md border border-line bg-white px-2.5 py-1.5 text-sm
                     placeholder-ink-500 focus:border-sage-600 focus:ring-2 focus:ring-sage-600; }
  .select   { @apply input; }
  .textarea { @apply input h-32 font-mono text-sm; }

  /* Labels - smaller for data-dense views */
  .label    { @apply text-2xs font-medium text-ink-700 uppercase tracking-wide; }

  /* Document-style status badges (stamps, not alerts) */
  .badge           { @apply inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium; }
  .badge-compliant     { @apply badge bg-[#e8f0e8] text-[#2d5a2d]; }
  .badge-non-compliant { @apply badge bg-[#f0e8e8] text-[#6b3333]; }
  .badge-pending       { @apply badge bg-[#e8ecf0] text-[#3d4f5f]; }
  .badge-unclear       { @apply badge bg-[#f0ede8] text-[#5c4d3d]; }
  .badge-not-applicable { @apply badge bg-[#ebebeb] text-[#5c5c5c]; }
  /* Legacy aliases */
  .badge-success   { @apply badge-compliant; }
  .badge-active    { @apply badge bg-sage-100 text-sage-800; }

  /* Tables - tighter cell padding */
  .table-base thead th { @apply px-2 py-1.5 text-left text-2xs font-medium text-ink-500 uppercase tracking-wider; }
  .table-base tbody td { @apply px-2 py-1.5 whitespace-nowrap text-sm; }
  .table-base tbody tr { @apply transition-all duration-150 border-b border-hairline border-line; }
  .table-base tbody tr:hover { @apply bg-sage-50; }

  /* Progress bar */
  .progress { @apply h-1.5 bg-sage-200 rounded; }
  .progress > .bar { width: var(--value, 0%); @apply h-1.5 bg-sage-600 rounded; }

  /* Hairline borders for internal dividers */
  .border-hairline { border-width: 0.5px; }
  .divide-hairline > * + * { border-top-width: 0.5px; }

  /* Prevent scroll chaining */
  .overscroll-contain { overscroll-behavior: contain; }
}